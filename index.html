<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Pronk Mobilize</title>
  <script>
    // Function to read any query string parameter from TMS
    function getParam(name) {
      return new URLSearchParams(window.location.search).get(name) || '';
    }

    // Capture all TMS fields dynamically
    const params = new URLSearchParams(window.location.search);
    const queryParams = [];
    for (const [key, value] of params.entries()) {
      // Skip 'autotest' if accidentally passed from TMS
      if (key.toLowerCase() !== 'autotest') {
        queryParams.push(`${encodeURIComponent(key)}=${encodeURIComponent(value)}`);
      }
    }

    // Base pronk URL
    const pronkBase = 'pronk://devtype?asset=t1234';

    // Fixed autotest block (as required)
    const autotestBlock = '{"NFPA992012APwGND","2sec,Rpt,PwrEnd,A","GndRes,500","NP:CL:NC,100","NP:CL:OG,500","NP:LLG:NC,100","NP:LLG:OG,500"}';

    // Combine everything into final deep link
    let pronkUrl = pronkBase + '?' + queryParams.join('&');
    pronkUrl += (queryParams.length > 0 ? '&' : '') + 'autotest=' + autotestBlock;

    // Automatically launch Pronk Mobilize
    window.location.href = pronkUrl;
  </script>
</head>
<body>
  <p>Launching Pronk Mobilizeâ€¦</p>
</body>
</html>

